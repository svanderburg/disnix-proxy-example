<chapter xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xml:id="chap-architecture">

	<title>Architecture</title>

	<figure xml:id="fig-1-architecture-without-proxy">
		<title>Simple server and client</title>		
		<mediaobject>
			<imageobject>
				<imagedata fileref="architecture-without-proxy.png" format="PNG"/>
			</imageobject>
		</mediaobject>
	</figure>
	
	<figure xml:id="fig-2-architecture-with-proxy">
		<title>Simple server and client using a proxy</title>		
		<mediaobject>
			<imageobject>
				<imagedata fileref="architecture-with-proxy.png" format="PNG"/>
			</imageobject>
		</mediaobject>
	</figure>
	
	<para>
		<xref linkend="fig-1-architecture-without-proxy" /> shows the architecture of this example,
		consisting of a server and a client.
		The server is a daemon listening for messages from the client. If the server
		receives 'hello', it will respond by returning a 'Hello world' message.
		In <xref linkend="fig-2-architecture-with-proxy" /> the architecture is extended with a proxy. This proxy is notified by
		Disnix if an upgrade starts, draining the connections to make an upgrade completely atomic.
	</para>
</chapter>
